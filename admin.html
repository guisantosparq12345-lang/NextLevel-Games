<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Admin - Loja</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <button onclick="logout()">Logout</button>
</header>

<h2 style="text-align:center;">Admin - Gerenciar Jogos</h2>

<div style="max-width: 400px; margin:auto; text-align:center;">
    <input type="text" id="gameName" placeholder="Nome do Jogo"><br>
    <input type="text" id="gameGenre" placeholder="G√™nero"><br>
    <input type="number" step="0.01" id="gamePrice" placeholder="Pre√ßo"><br>
    <input type="text" id="gameImage" placeholder="URL da Imagem"><br>
    <button onclick="adicionarJogo()">Adicionar Jogo</button>
</div>

<div id="catalogo" style="margin-top:20px;"></div>

<script>
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
if(!currentUser || currentUser.role !== "admin"){
    alert("üîí Apenas admin!");
    window.location.href = "index.html";
}

let jogos = JSON.parse(localStorage.getItem("games")) || [];

const catalogo = document.getElementById("catalogo");

function logout(){
    localStorage.removeItem("currentUser");
    window.location.href = "index.html";
}

function mostrarJogos(){
    catalogo.innerHTML = "";
    jogos.forEach((j,idx)=>{
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
            <img src="${j.imagem}">
            <div class="info">
                <h3>${j.nome}</h3>
                <span>${j.genero}</span><br>
                <strong>R$ ${j.preco.toFixed(2)}</strong><br><br>
                <button onclick="editarJogo(${idx})">‚úèÔ∏è Editar</button>
                <button onclick="removerJogo(${idx})">‚ùå Remover</button>
            </div>
        `;
        catalogo.appendChild(card);
    });
}

function adicionarJogo(){
    const nome = document.getElementById("gameName").value;
    const genero = document.getElementById("gameGenre").value;
    const preco = parseFloat(document.getElementById("gamePrice").value);
    const imagem = document.getElementById("gameImage").value;
    if(!nome || !genero || !preco || !imagem) return alert("Preencha todos os campos!");
    jogos.push({nome,genero,preco,imagem});
    localStorage.setItem("games", JSON.stringify(jogos));
    mostrarJogos();
}

function removerJogo(idx){
    if(!confirm("Deseja remover este jogo?")) return;
    jogos.splice(idx,1);
    localStorage.setItem("games", JSON.stringify(jogos));
    mostrarJogos();
}

function editarJogo(idx){
    const j = jogos[idx];
    const nome = prompt("Nome:", j.nome);
    const genero = prompt("G√™nero:", j.genero);
    const preco = parseFloat(prompt("Pre√ßo:", j.preco));
    const imagem = prompt("URL da Imagem:", j.imagem);
    if(!nome || !genero || !preco || !imagem) return;
    jogos[idx] = {nome,genero,preco,imagem};
    localStorage.setItem("games", JSON.stringify(jogos));
    mostrarJogos();
}

mostrarJogos();
</script>
</body>
</html>
